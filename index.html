<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday MAMTA ğŸ€</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,Segoe UI,sans-serif}
    

.gif-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 10px;
    padding: 10px;
    max-height: 400px;
    overflow-y: auto;
}
.gif-gallery img {
    width: 100%;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.box-shake {
    display: inline-block;
    animation: box-wiggle 0.5s infinite;
}

@keyframes box-wiggle {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(8deg); }
    50% { transform: rotate(0deg); }
    75% { transform: rotate(-8deg); }
    100% { transform: rotate(0deg); }
}

.prize-reveal {
    animation: prize-grow 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes prize-grow {
    0% { transform: scale(0); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes burst {
    from {
        transform: translate(0, 0) scale(1);
        opacity: 1;
    }
    to {
        transform: translate(var(--tx), var(--ty)) scale(0.6);
        opacity: 0;
    }
}

@keyframes heartBurst {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  100% {
    /* This uses random values set by JS to fly in different directions */
    transform: translate(var(--tx), var(--ty)) scale(1.5);
    opacity: 0;
  }
}

.correct-btn {
    background: #43e97b !important; /* Vibrant Green */
    color: white !important;
    transition: background 0.3s ease;
}

.burst-heart {
    position: fixed;
    font-size: 150px; 
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%); 
    animation: burst 5s ease-out forwards;
}

@keyframes shake {
  0% { transform: translate(0, 0) rotate(0deg); }
  20% { transform: translate(-8px, 5px) rotate(-1deg); }
  40% { transform: translate(8px, -5px) rotate(1deg); }
  60% { transform: translate(-8px, -5px) rotate(-1deg); }
  80% { transform: translate(8px, 5px) rotate(1deg); }
  100% { transform: translate(0, 0) rotate(0deg); }
}

.shake-screen {
  animation: shake 0.4s ease-in-out;
  animation-iteration-count: 3; 
}

.victory-crown {
  font-size: 60px;
  display: block;
  margin: 10px auto;
  animation: trophyPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}


#imgPopup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

#imgPopup img{
  max-width:90%;
  max-height:90%;
  border-radius:20px;
  box-shadow:0 20px 50px rgba(255,255,255,0.3);
}

#imgPopup .close{
  position:absolute;
  top:20px;
  right:30px;
  font-size:40px;
  color:white;
  cursor:pointer;
}


#memoriesGallery img{
  width:220px;
  border-radius:18px;
  border:4px solid #fff;
  box-shadow:0 10px 25px rgba(0,0,0,0.25);
  transition:0.3s;
}

#memoriesGallery img:hover{
  transform:scale(1.08);
}

#page3 img{
  width:220px;
  height:auto;
  border-radius:18px;
  border:4px solid #fff;
  box-shadow:0 10px 25px rgba(0,0,0,0.25);
  display:block !important;
  opacity:1 !important;
  animation:none !important;
}



#futurePics {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 50px; 
}


#quizAnswer {
    height: 40px; 
    margin-top: 40px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

#quizQuestion {
    min-height: 90px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    overflow: hidden;
}

#fullScreenOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    display: none; 
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    padding: 20px;
    box-sizing: border-box;
    animation: slowFadeIn 2.5s ease-in-out; 
}


@keyframes slowFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}


#fullScreenOverlay img {
    max-width: 95%;
    max-height: 55vh; 
    object-fit: contain; 
    border: 4px solid white;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(255,255,255,0.5);
    margin-bottom: 20px;
    animation: slowZoom 3s ease-in-out;
}

@keyframes slowZoom {
    from { transform: scale(0.8); }
    to { transform: scale(1); }
}

#fullScreenOverlay h1 {
    color: #ff4f81;
    font-size: clamp(1.8rem, 8vw, 3rem); 
    text-align: center;
    text-shadow: 0 0 20px rgba(255, 79, 129, 0.8);
    font-family: 'Poppins', sans-serif;
    margin: 10px 0;
    animation: prize-grow 1s ease-out;
    line-height: 1.2;
}
#fullScreenOverlay p {
    font-size: 1rem;
    color: white;
    text-align: center;
    margin-top: 5px;
}

#stopFlowBtn {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 10001; 
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #ff4f81;
    color: #ff4f81;
    padding: 10px 15px;
    border-radius: 25px;
    font-size: 13px;
    font-weight: bold;
    cursor: pointer;
    display: none; /* Hidden by default */
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    -webkit-tap-highlight-color: transparent;
}

#fireworkCanvas {
  position: fixed;
  inset: 0;
  z-index: 20000;   /* higher than everything */
  pointer-events: none;
}


body {
    margin: 0;
    min-height: 100vh;
    background: #ffb6c1;
    overflow-x: hidden;
    font-family: Poppins,Segoe UI,sans-serif;
    background-attachment: fixed;
    transition: background-color 0.8s ease-in-out !important;
}


.page {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    width: 100%;
    min-height: 100vh;
    transition: opacity 0.5s ease;
}


.page{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;transition:1s}


.hidden {
    display: none !important;
    position: fixed; 
}



.card{
background:#fff;
max-width:900px;width:92%;
border-radius:30px;
padding:45px 30px;
box-shadow:0 25px 60px rgba(0,0,0,.15);
text-align:center;
}

h1{font-size:2.4rem;color:#ff4f81}
h2{font-size:1.3rem;margin:15px 0 25px;color:#555}

.name{
background:linear-gradient(90deg,#ff4f81,#ff85a2,#ff4f81);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
font-weight:800;
}

.magic-btn{
padding:16px 42px;
border:none;
border-radius:50px;
background:linear-gradient(135deg,#ff4f81,#ff85a2);
color:#fff;
font-size:1.05rem;
cursor:pointer;
box-shadow:0 15px 35px rgba(255,79,129,.45);
}


.page2, .page3, .page4 {
    align-items: center;
    justify-content: flex-start; 
    text-align: center;
    padding: 20px;   
    width: 100%;
}

.photo {
    width: fit-content;       
    max-width: 260px;
    height: auto;
    border-radius: 20px;
    border: 6px solid #fff;
    display: block;
    margin: 20px auto;   
    box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}


.soft-text{color:#666;margin-bottom:10px}

.games{
margin-top:25px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:18px;
width:94%;
max-width:1200px;
}

.game{
background:transparent;
border:2px solid rgba(255,79,129,0.6);
border-radius:22px;
padding:18px;
}

.game h3{color:#ff4f81;margin-bottom:10px}

.game button{
padding:8px 16px;
border-radius:20px;
border:none;
background:#ff85a2;
color:#fff;
cursor:pointer;
margin-top:8px;
}

/* Styling for the Secret Note Close Button */
.close-note-btn {
    background: #ff4f81;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    margin-top: 15px;
    font-size: 14px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(255, 79, 129, 0.3);
    transition: 0.3s;
}

.close-note-btn:hover {
    background: #ff85a2;
    transform: scale(1.05);
}

.cake {
  font-size: 70px;
  cursor: pointer;
  margin: 5px;
  display: inline-block;
  transition: all 0.8s ease; 
}

@keyframes flicker {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.cake:not(.blown) {
  animation: flicker 1.5s infinite;
}

.hidden-msg {
    display: none;
    color: #ff4f81;
    font-weight: 600;
    max-height: 150px; 
    overflow-y: auto;  
    padding: 10px;
    border: 1px dashed #ff85a2;
    background: #fffafa;
    border-radius: 10px;
}


.mood span{font-size:28px;cursor:pointer;margin:4px}

.float{
position:fixed;
top:-50px;
font-size:28px;
animation:fall linear forwards;
pointer-events:none;
z-index:999;
}

.flower-shower {
    position: fixed;
    top: -50px;
    z-index: 9999;
    pointer-events: none;
    animation: fall linear forwards;
}

@keyframes fall {
    to { transform: translateY(100vh) rotate(360deg); }
}

#fireworkText {
  position: fixed;
  top: 12%;
  left: 50%;
  transform: translateX(-50%);
  font-size: clamp(32px, 7vw, 80px);
  font-weight: 900;
  color: #b30000;
  text-align: center;
  z-index: 20001;
  text-shadow:
    0 0 15px rgba(255, 0, 0, 0.8),
    0 0 30px rgba(255, 100, 100, 0.9);
  pointer-events: none;
  animation: fadeText 6s ease-in-out forwards;
}

@keyframes fadeText {
  0% { opacity: 0; transform: translate(-50%, -20px); }
  20% { opacity: 1; transform: translate(-50%, 0); }
  80% { opacity: 1; }
  100% { opacity: 0; transform: translate(-50%, -20px); }
}


</style>
</head>

<body>
<button id="stopFlowBtn" onclick="toggleFalling()">StopğŸ¥€</button><!-- PAGE 3 : GIFT PAGE -->
<div id="fullScreenOverlay" onclick="resetFromImage()">
    <img src="MAMTA/fulscreen.jpg" alt="Birthday Queen">
    <h1>HAPPY BIRTHDAY MAMTA! ğŸ‚</h1>
    <p style="color: white; margin-top: 10px;">Click anywhere to play again âœ¨</p>
</div>
 <!-- PAGE 4 : MEMORIES PAGE -->
<div class="page page4 hidden" id="page4">
  <div class="card">
    <h1>ğŸ“¸ Beautiful Memories ğŸ’–</h1>

    <div id="memoriesGallery">
      <img src="MEMORY/memory1.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory2.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory3.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory4.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory5.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory6.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory7.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory8.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory9.jpg" onclick="openPopup(this)">
      <img src="MEMORY/memory10.jpg" onclick="openPopup(this)">
      <img src="MEMORY/LAST MEMORY.jpg" onclick="openPopup(this)">
      <video src="MEMORY/video1.mp4" controls style="width:220px;border-radius:18px;margin-top:15px;"></video>

    </div>
    <br>
    <button class="magic-btn" onclick="backToGamesFromMemories()">â¬… Back</button>
  </div>
</div>


<div class="page page3 hidden" id="page3">  
  <div class="card">
    <h1>ğŸ€ Gifts for You, Mamta ğŸ’</h1>

    <div id="futurePics">
      <img src="GIFT/gift1.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift2.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift3.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift4.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift5.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift6.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift7.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift8.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift9.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift10.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift11.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift12.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift13.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift14.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift15.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift16.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift17.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift18.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift19.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift20.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift21.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift22.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift23.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift24.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift25.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift26.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift27.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift28.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift29.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift30.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift31.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift32.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift33.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift34.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift35.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift36.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift37.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift38.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift39.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift40.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift41.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift42.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift43.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift44.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift45.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift46.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift47.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift48.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift49.jpg" onclick="openPopup(this)">
      <img src="GIFT/gift50.jpg" onclick="openPopup(this)">

    </div>

    <br>
    <button class="magic-btn" onclick="backToGames()">â¬… Back</button>
  </div>
</div>


<!-- PAGE 1 -->
<div class="page" id="page1">
<div class="card">
<h1>Happy Birthday <span class="name">MAMTA ğŸ€</span></h1>
<h2>A little pink world made just for you ğŸ’•</h2>
<button class="magic-btn" onclick="enterPage()">Enter Your Surprise âœ¨</button>
</div>
</div>

<!-- PAGE 2 -->
<div class="page page2 hidden" id="page2">

<audio id="music" loop>
<source src="MEMORY/Happy Birthday Mamta.mp3" type="audio/mpeg">
</audio>

<img src="MAMTA/mamta.jpg" class="photo" alt="Birthday Girl Mamta">
<h1>ğŸŒ¸ Hey <span class="name">MANNU</span> ğŸŒ¸</h1>
<p class="soft-text" id="timer">Youâ€™ve been smiling here for 0 seconds â³</p>

<div class="games">

<div class="game">
<h3>ğŸ‚ BLOW THE CANDLES</h3>
<div>
<span class="cake" onclick="blowClick(this)">ğŸ‚</span>
<span class="cake" onclick="blowClick(this)">ğŸ§</span>
<span class="cake" onclick="blowClick(this)">ğŸ°</span>
<span class="cake" onclick="blowClick(this)">ğŸ®</span>
<!--below 1 line added-->
</div>
<button onclick="resetBlowGame()">Reset</button>
<button onclick="startMic()">ğŸ¤ Blow using mic</button>
<p>Make a wish âœ¨</p>
</div>

<div class="game" style="padding: 20px;">
  <div class="game" style="
  background: linear-gradient(135deg, #fff0f5, #ffe4ec);
  border: 2px solid #ff85a2;
  box-shadow: inset 0 0 15px rgba(255,79,129,0.15);
">
  <h3>ğŸ’– Catch the Hearts</h3>
  <button onclick="startHeartGame()">Start</button>
  <p style="font-weight:bold; font-size:18px;">
    â¤ï¸ <span id="score">0</span>
  </p>
</div>

  <hr style="border: 1px solid #ffb6c1; margin: 40px 0;">

  <h3>ğŸ MAGIC SCRATCH CARD</h3>
  <div id="scratchContainer" style="position:relative; width:180px; height:180px; margin:0 auto; border:4px solid #ff85a2; border-radius:20px; overflow:hidden; touch-action: none;">
    <div style="position:absolute; inset:0; background:#fff;">
      <img id="scratchImage" src="photo1.jpg" style="width:100%; height:100%; object-fit:cover;">
    </div>
    <canvas id="scratchCanvas" width="180" height="180" style="position:absolute; inset:0; cursor:crosshair;"></canvas>
  </div>
  <button onclick="initScratch()" style="margin-top: 10px;">Reset Card</button>
</div>

<div class="game" style="min-height: 520px; display: flex; flex-direction: row; gap: 15px; align-items: stretch;">
  
  <div style="width: 50px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 20px;">
    <div style="flex-grow: 1; width: 20px; background: #eee; border-radius: 20px; position: relative; border: 2px solid #ff85a2; overflow: hidden;">
      <div id="meterFill" style="position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(to top, #ff85a2, #ff4f81); transition: height 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);"></div>
    </div>
    <span style="font-size: 20px; margin-top: 5px;">ğŸ”¥</span>
  </div>

  <div style="flex-grow: 1; display: flex; flex-direction: column; text-align: left;">
    <h3 style="text-align: center;">ğŸ§© CUTE QUIZ</h3>
    <div style="flex-grow: 1; margin-top: 15px;">
      <p id="quizQuestion" style="font-weight: 600; min-height: 60px;"></p>
      <div id="quizOptions" style="display: grid; gap: 8px;"></div>
      <p id="quizAnswer" style="font-weight: bold; color: #ff4f81; min-height: 20px;"></p>

    </div>
    
    <div style="margin-top: auto; padding-top: 15px; border-top: 1px dashed #ff85a2;">
      <p id="meterStatus" style="font-size: 11px; color: #888; margin-bottom: 10px;">Status: Only correct answers raise the heat! ğŸ”¥</p>
      <button class="magic-btn" onclick="resetQuizGame()" style="padding: 8px 15px; width: 100%; font-size: 0.8rem;">Restart Meter ğŸ”„</button>
    </div>
  </div>
</div>

<div class="game">
<h3>ğŸ¨ PICK YOUR MOOD </h3>
<div class="mood">
<span onclick="setMood(0)">ğŸ’–</span>
<span onclick="setMood(1)">ğŸŒˆ</span>
<span onclick="setMood(2)">ğŸŒ¸</span>
<span onclick="setMood(3)">âœ¨</span>
<span onclick="setMood(4)">ğŸŒº</span>
<span onclick="setMood(5)">ğŸŒ</span>
<span onclick="setMood(6)">ğŸŒ™</span>
<span onclick="setMood(7)">ğŸ”¥</span>
<span onclick="setMood(8)">ğŸŒŠ</span>
<span onclick="setMood(9)">ğŸŒ³</span>
<span onclick="setMood(10)">â„ï¸</span>
<span onclick="setMood(11)">ğŸŒ»</span>
<span onclick="setMood(12)">ğŸŒŸ</span>
<span onclick="setMood(13)">ğŸ€</span>
<span onclick="setMood(14)">ğŸ’</span>
<span onclick="setMood(15)">ğŸ‚</span>
<span onclick="setMood(16)">ğŸµ</span>
<span onclick="setMood(17)">ğŸŒŒ</span>
<span onclick="setMood(18)">ğŸ€</span>
<span onclick="setMood(19)">ğŸŒ¹</span>
<span onclick="setMood(20)">ğŸ¦‹</span>
<span onclick="setMood(21)">ğŸ“</span>
<span onclick="setMood(22)">ğŸ</span>
<span onclick="setMood(23)">âš¡</span>
<span onclick="setMood(24)">ğŸ‰</span>
<span onclick="setMood(25)">ğŸ’«</span>
<span onclick="setMood(26)">ğŸ„</span>
<span onclick="setMood(27)">ğŸŒ</span>
<span onclick="setMood(28)">ğŸˆ</span>
<span onclick="setMood(29)">ğŸŒ·</span>
<span onclick="setMood(30)">ğŸ</span>
<span onclick="setMood(31)">ğŸª</span>
<span onclick="setMood(32)">ğŸŒ¼</span>
<span onclick="setMood(33)">ğŸ¦„</span>
<span onclick="setMood(34)">ğŸª</span>
<span onclick="setMood(35)">ğŸŒ </span>


</div>
</div>
<div class="game" id="gifSection">
  <h3>âœ¨ MAMTA'S MOMENTS âœ¨</h3>
  <div class="gif-gallery">
    <img src="GIF/gif1.gif" alt="fun">
    <img src="GIF/gif2.gif" alt="fun">
    <img src="GIF/gif3.gif" alt="fun">
    <img src="GIF/gif4.gif" alt="fun">
    <img src="GIF/gif5.gif" alt="fun">
    <img src="GIF/gif6.gif" alt="fun">
    <img src="GIF/gif7.gif" alt="fun">
    <img src="GIF/gif8.gif" alt="fun">
    <img src="GIF/gif9.gif" alt="fun">
    <img src="GIF/gif10.gif" alt="fun">
    <img src="GIF/gif11.gif" alt="fun">
    <img src="GIF/gif12.gif" alt="fun">
    <img src="GIF/gif13.gif" alt="fun">
    <img src="GIF/gif14.gif" alt="fun">
    <img src="GIF/gif15.gif" alt="fun">
    <img src="GIF/gif16.gif" alt="fun">
    <img src="GIF/gif17.gif" alt="fun">
    <img src="GIF/gif18.gif" alt="fun">
    <img src="GIF/gif19.gif" alt="fun">
    <img src="GIF/gif20.gif" alt="fun">
    <img src="GIF/gif21.gif" alt="fun">
    <img src="GIF/gif22.gif" alt="fun">
    <img src="GIF/gif23.gif" alt="fun">
    <img src="GIF/gif24.gif" alt="fun">
    <img src="GIF/gif25.gif" alt="fun">
    <img src="GIF/gif26.gif" alt="fun">
    <img src="GIF/gif27.gif" alt="fun">
    <img src="GIF/gif28.gif" alt="fun">
    <img src="GIF/gif29.gif" alt="fun">
    <img src="GIF/gif30.gif" alt="fun">
    <img src="GIF/gif31.gif" alt="fun">
    <img src="GIF/gif32.gif" alt="fun">
    <img src="GIF/gif33.gif" alt="fun">
    <img src="GIF/gif34.gif" alt="fun">
    <img src="GIF/gif35.gif" alt="fun">
    <img src="GIF/gif36.gif" alt="fun">
    <img src="GIF/gif37.gif" alt="fun">
    <img src="GIF/gif38.gif" alt="fun">
    <img src="GIF/gif39.gif" alt="fun">
    <img src="GIF/gif40.gif" alt="fun">
    <img src="GIF/gif41.gif" alt="fun">
    <img src="GIF/gif42.gif" alt="fun">
    <img src="GIF/gif43.gif" alt="fun">
    <img src="GIF/gif44.gif" alt="fun">
    <img src="GIF/gif45.gif" alt="fun">
    <img src="GIF/gif46.gif" alt="fun">
    <img src="GIF/gif47.gif" alt="fun">
    <img src="GIF/gif48.gif" alt="fun">
    <img src="GIF/gif49.gif" alt="fun">
    <img src="GIF/gif50.gif" alt="fun">
    <img src="GIF/gif52.gif" alt="fun">
    <img src="GIF/gif53.gif" alt="fun">
    <img src="GIF/gif54.gif" alt="fun">
    <img src="GIF/gif55.gif" alt="fun">
    <img src="GIF/gif56.gif" alt="fun">
    <img src="GIF/gif57.gif" alt="fun">
    <img src="GIF/gif58.gif" alt="fun">
    <img src="GIF/gif59.gif" alt="fun">
    <img src="GIF/gif60.gif" alt="fun">
    <img src="GIF/gif61.gif" alt="fun">
    <img src="GIF/gif62.gif" alt="fun">
    <img src="GIF/gif63.gif" alt="fun">
    <img src="GIF/gif64.gif" alt="fun">
    <img src="GIF/gif65.gif" alt="fun">
    <img src="GIF/gif66.gif" alt="fun">
    <img src="GIF/gif67.gif" alt="fun">
    <img src="GIF/gif68.gif" alt="fun">
    <img src="GIF/gif69.gif" alt="fun">
    <img src="GIF/gif70.gif" alt="fun">
    <img src="GIF/gif71.gif" alt="fun">
    <img src="GIF/gif72.gif" alt="fun">
    <img src="GIF/gif73.gif" alt="fun">
    <img src="GIF/gif74.gif" alt="fun">
    <img src="GIF/gif75.gif" alt="fun">
    <img src="GIF/gif76.gif" alt="fun">
    <img src="GIF/gif77.gif" alt="fun">
    <img src="GIF/gif78.gif" alt="fun">
    <img src="GIF/gif79.gif" alt="fun">
    <img src="GIF/gif80.gif" alt="fun">
    <img src="GIF/gif81.gif" alt="fun">
    <img src="GIF/gif82.gif" alt="fun">
    <img src="GIF/gif83.gif" alt="fun">
    <img src="GIF/gif84.gif" alt="fun">
    <img src="GIF/gif85.gif" alt="fun">
    <img src="GIF/gif86.gif" alt="fun">
    <img src="GIF/gif87.gif" alt="fun">
    <img src="GIF/gif88.gif" alt="fun">
    <img src="GIF/gif89.gif" alt="fun">
    <img src="GIF/gif90.gif" alt="fun">
    <img src="GIF/gif91.gif" alt="fun">
    <img src="GIF/gif92.gif" alt="fun">
    <img src="GIF/gif93.gif" alt="fun">
    <img src="GIF/gif94.gif" alt="fun">
    <img src="GIF/gif95.gif" alt="fun">
    <img src="GIF/gif96.gif" alt="fun">
    <img src="GIF/gif97.gif" alt="fun">
    <img src="GIF/gif98.gif" alt="fun">
    <img src="GIF/gif99.gif" alt="fun">
    <img src="GIF/gif100.gif" alt="fun">

    </div>
</div>

<div class="game">
  <h3>ğŸ” SECRET NOTE</h3>
      <h5>This Note Will Show Only After The Scoreing 10 in Catch the Heat Game.</h5>
  <!-- Score always visible -->
  <p style="font-weight:bold;">ğŸ¯ Score: <span id="secretScore">0</span></p>

  <!-- Button (hidden until score = 2) -->
  <button id="revealBtn" class="magic-btn" style="display:none;" onclick="revealSecret()">
    Reveal Secret ğŸ’Œ
  </button>

  <!-- Hidden message -->
  <p class="hidden-msg" id="hiddenMsg"></p>
</div>


<div class="game">
<h3>ğŸ’Œ Compliment</h3>
<button onclick="compliment()">Tap</button>
<p id="comp"></p>
</div>

<div class="game">
  <h3>ğŸ Gift Shower</h3>
  <p>ğŸğŸ’ğŸ§¸ğŸ‘—ğŸ’„ğŸ’ğŸŒ¸ğŸ€</p>
  <button class="magic-btn" onclick="openGiftPage()">Open Gifts ğŸ€</button>
</div>

<div class="game">
<h3>ğŸ† Fireworks</h3>
<button onclick="startFireworksWithText()">Celebrate ğŸ‰</button>

</div>

<div class="game">
<h3>ğŸµ Music Control</h3>
<button onclick="music.pause()">Pause</button>
<button onclick="music.play()">Play</button>
</div>

<div class="game">
  <h3>ğŸ“¸ Memories</h3>
  <p>Every moment with you is special âœ¨</p>
  
<button class="magic-btn" onclick="openMemoriesPage()">View Memories ğŸ“·</button>
<hr style="border: 1px dashed #ff85a2; margin: 30px 0;">
<div class="game">
    <h3>ğŸŒˆ MAGIC BACKGROUND</h3>
    <p style="font-size: 13px; margin-bottom: 10px;">Let the colors celebrate you, Mamta! âœ¨</p>
    <div style="display: flex; gap: 10px; justify-content: center;">
        <button id="startColorBtn" style="background: #43e97b; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;" onclick="toggleBgParty(true)">Start Party ğŸ‰</button>
        <button id="stopColorBtn" style="background: #ff4f81; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; display: none;" onclick="toggleBgParty(false)">Stop ğŸ›‘</button>
    </div>
</div>
</div>

<div class="game" id="bottleGame">
  <h3>ğŸ¾ MESSAGE IN A BOTTLE</h3>
  <div id="oceanArea" style="height: 180px; background: linear-gradient(#81d4fa, #0288d1); border-radius: 20px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; touch-action: none; cursor: pointer;">
    
    <div id="magicBottle" style="font-size: 60px; transition: transform 0.1s; user-select: none;">ğŸ¾</div>
    
    <div id="hiddenMessage" style="display: none; position: absolute; background: #fff9c4; padding: 20px; border: 2px solid #fbc02d; border-radius: 10px; width: 85%; font-family: 'Georgia', serif; font-size: 14px; color: #5d4037; box-shadow: 0 8px 20px rgba(0,0,0,0.4); z-index: 20; text-align: center;">
        <p id="randomScrollText" style="margin-bottom: 15px; line-height: 1.4; font-weight: bold; min-height: 40px;"></p>
        <button onclick="resetBottle()" style="background: #fbc02d; border: none; padding: 8px 15px; cursor: pointer; border-radius: 5px; font-weight: bold; color: #5d4037;">Close Scroll ğŸ“œ</button>
    </div>
  </div>
  
  <p id="shakeStatus" style="font-size: 13px; margin-top: 10px; color: #333; font-weight: bold;">Rub the ocean or Tap the bottle! âœ¨</p>
  
  <div style="width: 80%; background: #ddd; height: 12px; border-radius: 6px; margin: 8px auto; overflow: hidden; border: 1px solid #bbb;">
    <div id="shakeBar" style="width: 0%; height: 100%; background: linear-gradient(to right, #ff4f81, #ff85a2); transition: width 0.1s;"></div>
  </div>
</div>

<div class="game" id="butterflyGarden">
  <h3>ğŸ¦‹ MAGIC BUTTERFLY GARDEN</h3>
  <div id="gardenCanvas" style="height: 150px; background: #f0fff0; border: 2px solid #98fb98; border-radius: 20px; position: relative; overflow: hidden; cursor: pointer;" onclick="plantFlower(event)">
    <p id="gardenHint" style="margin-top: 60px; font-size: 13px; color: #2e8b57;">Tap inside to plant flowers! ğŸŒ·</p>
  </div>
  <p id="gardenStatus" style="font-size: 12px; margin-top: 8px; color: #555;">Flowers planted: <span id="flowerCount">0</span>/10 to summon the Butterfly</p>
  <button class="magic-btn" style="padding: 5px 15px; font-size: 0.8rem;" onclick="resetGarden()">Clear Garden ğŸŒ¿</button>
</div>

<div class="game">
  <h3>â¤ï¸ LOVE EXPLOSION</h3>
  <p style="font-size: 13px;">How much love do you want today?</p>
  <div id="mainHeart" onclick="incrementLove(event)" 
     style="font-size: 100px; cursor: pointer; margin: 10px auto; display: block; text-align: center; transition: transform 0.1s; width: fit-content;">
     â¤ï¸
  </div>
  <button class="magic-btn" onclick="explodeNow()">ğŸ’¥ Explode Love</button>
  <p id="loveCount" style="font-weight: bold; color: #ff4f81; font-size: 18px;">Love Level: 0</p>
</div>

<div class="game">
  <h3>â³ TIME TRAVEL</h3>
  <div id="timeTravelBox" style="border: 2px solid #ff85a2; border-radius: 15px; padding: 10px; background: #fff5f7;">
    <img id="travelImg" src="MAMTA/mamta.jpg" style="width: 100%; height: 150px; object-fit: cover; border-radius: 10px;">
    <p id="travelCaption" style="font-weight: bold; margin-top: 10px; color: #ff4f81; font-size: 14px;">Where it all began... ğŸŒ¸</p>
  </div>
  <button class="magic-btn" onclick="nextMemory()" style="margin-top: 10px; padding: 8px 15px; font-size: 0.8rem;">Next Era âœ¨</button>
</div>

</div>

<p class="soft-text" style="margin-top:25px"><B>â€” From GAURAV ğŸ’</B></p>
</div>

<script>
let startTime,score=0,gamesPlayed=0,quizIndex=0;
let secretOpened = false; // ğŸ” lock
let page2ScrollY = 0;


const quizData = [
    { q: "What is Mamta's absolute favorite color?", o: ["Pink", "Red", "Blue", "Lavender"], a: 0 },
    { q: "If Mamta was an animal, which one would she be?", o: ["Lioness", "Cute Kitten", "Butterfly", "Rabbit"], a: 1 },
    { q: "What is Mamta's favorite season?", o: ["Rainy", "Winter", "Summer", "Spring"], a: 1 },
    { q: "How much does Mamta love chocolate?", o: ["A little", "Medium", "Infinity!", "Not at all"], a: 2 },
    { q: "What is Mamta's superpower?", o: ["Flying", "Being too cute", "Invisible", "Super strength"], a: 1 },
    { q: "Which snack can Mamta never say no to?", o: ["Pizza", "Gol Gappa", "Chocolate", "Chips"], a: 1 },
    { q: "Is Mamta a morning person or a night owl?", o: ["Morning Bird", "Night Owl", "Always Sleeping", "Always Active"], a: 1 },
    { q: "What makes Mamta the happiest?", o: ["Shopping", "Food", "Small gestures", "Sleeping"], a: 2 },
    { q: "What is Mamta's dream destination?", o: ["Paris", "Switzerland", "Maldives", "Kedarnath"], a: 3 },
    { q: "Which flower defines Mamta's personality?", o: ["Rose", "Sunflower", "Lily", "Tulip"], a: 0 },
    { q: "If Mamta was a fruit, what would she be?", o: ["Mango", "Strawberry", "Cherry", "Apple"], a: 1 },
    { q: "What is Mamta's favorite hobby?", o: ["Dancing", "Reading", "Overthinking", "Cooking"], a: 2 },
    { q: "How many hours can Mamta sleep?", o: ["5 hours", "8 hours", "12 hours", "Forever"], a: 3 },
    { q: "What is Mamta's reaction to a surprise?", o: ["Screams", "Blushes", "Cries", "Speechless"], a: 1 },
    { q: "What kind of movies does Mamta like?", o: ["Horror", "Romantic", "Action", "Comedy"], a: 1 },
    { q: "What is Mamta's favorite drink?", o: ["Tea", "Coffee", "Cold Drink", "Juice"], a: 0 },
    { q: "Who is Mamta's favorite person?", o: ["Mom", "Dad", "Bestie", "You know who!"], a: 3 },
    { q: "What is Mamta's favorite outfit style?", o: ["Ethnic", "Western", "Pajamas", "Oversized Tees"], a: 0 },
    { q: "If Mamta wins a lottery, what will she buy first?", o: ["Car", "Makeup", "Food", "Give to Charity"], a: 1 },
    { q: "How does Mamta handle stress?", o: ["Crying", "Eating", "Sleeping", "Talking it out"], a: 2 },
    { q: "What is the one thing Mamta hates?", o: ["Lies", "Late replies", "Noisy places", "Crowds"], a: 1 },
    { q: "What is Mamta's favorite emoji?", o: ["ğŸ’–", "ğŸ€", "ğŸ™ˆ", "ğŸ¥º"], a: 1 },
    { q: "Is Mamta more Emotional or Practical?", o: ["Emotional", "Practical", "Both", "Neither"], a: 0 },
    { q: "What is Mamta's lucky number?", o: ["7", "3", "9", "5"], a: 0 },
    { q: "Does Mamta believe in soulmates?", o: ["Yes", "No", "Maybe", "Only in movies"], a: 0 },
    { q: "What is Mamta's favorite street food?", o: ["Momos", "Samosa", "Aloo Tikki", "Vada Pav"], a: 0 },
    { q: "What would Mamta choose?", o: ["Mountains", "Beaches", "Cities", "Forests"], a: 0 },
    { q: "What is Mamta's signature hair style?", o: ["Open hair", "Ponytail", "Bun", "Braids"], a: 0 },
    { q: "How many selfies does Mamta take daily?", o: ["Zero", "5-10", "50+", "Infinite"], a: 2 },
    { q: "Final Question: Is Mamta 100% Perfect?", o: ["Yes", "Absolutely", "Definitely", "All of the above"], a: 3 },
    { q: "What time of day suits Mamta the most?", o: ["Early Morning", "Afternoon", "Evening", "Late Night"], a: 3 },
    { q: "Which quality shines most in Mamta?", o: ["Kindness", "Patience", "Confidence", "Humor"], a: 0 },
    { q: "What kind of weather makes Mamta happiest?", o: ["Sunny", "Rainy", "Cloudy", "Cold"], a: 1 },
    { q: "What does Mamta value most in people?", o: ["Money", "Honesty", "Looks", "Status"], a: 1 },
    { q: "Which song type suits Mamta best?", o: ["Sad", "Romantic", "Lofi", "Party"], a: 2 },
    { q: "What makes Mamta feel safe?", o: ["Silence", "Good company", "Music", "Sleep"], a: 1 },
    { q: "Mamta is more attracted to?", o: ["Luxury", "Simplicity", "Fame", "Power"], a: 1 },
    { q: "Which place would Mamta relax most?", o: ["Hilltop", "Temple", "Home", "Cafe"], a: 2 },
    { q: "What kind of gifts does Mamta love?", o: ["Expensive", "Thoughtful", "Big", "Surprise"], a: 1 },
    { q: "Mamta believes more in?", o: ["Luck", "Hard work", "Destiny", "Magic"], a: 2 },
    { q: "What kind of smile suits Mamta?", o: ["Cute", "Soft", "Shy", "All of these"], a: 3 },
    { q: "What calms Mamta instantly?", o: ["Food", "Sleep", "Music", "Talking"], a: 3 },
    { q: "Mamta prefers conversations that are?", o: ["Deep", "Funny", "Short", "Random"], a: 0 },
    { q: "Which color combo suits Mamta most?", o: ["Pink & White", "Black & Red", "Blue & Grey", "Green & Yellow"], a: 0 },
    { q: "Mamtaâ€™s personality is closest to?", o: ["Soft Flower", "Warm Sunshine", "Calm Moon", "Bright Star"], a: 1 },
    { q: "What does Mamta notice first?", o: ["Eyes", "Smile", "Voice", "Vibe"], a: 3 },
    { q: "Mamta enjoys silence when?", o: ["Sad", "Happy", "Tired", "Thinking"], a: 2 },
    { q: "What kind of friend is Mamta?", o: ["Listener", "Advisor", "Protector", "All"], a: 3 },
    { q: "Mamtaâ€™s energy is mostly?", o: ["Calm", "Cheerful", "Soft", "Balanced"], a: 3 },
    { q: "What makes Mamta emotional?", o: ["Memories", "Music", "Words", "All"], a: 3 },
    { q: "Mamta prefers gifts that are?", o: ["Useful", "Pretty", "Emotional", "Trendy"], a: 2 },
    { q: "What is Mamta naturally good at?", o: ["Understanding people", "Leading", "Teaching", "Convincing"], a: 0 },
    { q: "Mamta feels happiest when she is?", o: ["Loved", "Appreciated", "Relaxed", "Smiling"], a: 1 },
    { q: "Mamtaâ€™s comfort zone is?", o: ["People", "Music", "Home", "Memories"], a: 2 },
    { q: "What does Mamta avoid most?", o: ["Drama", "Arguments", "Negativity", "Crowds"], a: 2 },
    { q: "Mamtaâ€™s heart is mostly?", o: ["Soft", "Strong", "Pure", "Golden"], a: 3 },
    { q: "Mamta shines brightest when she is?", o: ["Happy", "Calm", "Loved", "Confident"], a: 0 },
    { q: "Mamta prefers plans that are?", o: ["Fixed", "Flexible", "Spontaneous", "Simple"], a: 1 },
    { q: "Mamta connects fastest with?", o: ["Kind people", "Funny people", "Quiet people", "Honest people"], a: 3 },
    { q: "Mamtaâ€™s vibe feels like?", o: ["Warm hug", "Soft breeze", "Gentle rain", "Moonlight"], a: 0 },
    { q: "Mamta believes love should be?", o: ["Loud", "Deep", "Patient", "Pure"], a: 3 },
    { q: "Mamta enjoys moments that are?", o: ["Peaceful", "Joyful", "Meaningful", "Silent"], a: 2 },
    { q: "Mamtaâ€™s presence makes people feel?", o: ["Safe", "Happy", "Calm", "All"], a: 3 },
    { q: "Mamtaâ€™s strength lies in her?", o: ["Heart", "Mind", "Smile", "Soul"], a: 3 },
    { q: "Mamtaâ€™s kindness is?", o: ["Rare", "Natural", "Hidden", "Powerful"], a: 1 },
    { q: "Mamta deserves?", o: ["Happiness", "Respect", "Love", "Everything"], a: 3 },
    { q: "Mamtaâ€™s nature is more?", o: ["Gentle", "Warm", "Caring", "All"], a: 3 },
    { q: "Mamtaâ€™s smile feels like?", o: ["Sunrise", "Comfort", "Magic", "Home"], a: 3 },
    { q: "Mamtaâ€™s heart speaks in?", o: ["Actions", "Silence", "Care", "Love"], a: 3 },
    { q: "Final Bonus: Mamta is?", o: ["Special", "Rare", "Precious", "All of these"], a: 3 }

];

function loadQuiz() {
    if (quizIndex === 0) {
        shuffleArray(quizData);
    }

    const q = quizData[quizIndex];
    document.getElementById("quizQuestion").innerText = q.q;
    const optionsContainer = document.getElementById("quizOptions");
    optionsContainer.innerHTML = "";
    document.getElementById("quizAnswer").innerText = "";

    let shuffledOptions = q.o.map((text, index) => ({ text, isCorrect: index === q.a }));
    shuffleArray(shuffledOptions);

    shuffledOptions.forEach((opt) => {
        let btn = document.createElement("button");
        btn.className = "quiz-opt"; 
        btn.innerText = opt.text;
        btn.onclick = () => checkAnswer(opt.isCorrect, btn);
        optionsContainer.appendChild(btn);
    });
}


let correctCount = 0; 

function checkAnswer(isCorrect, clickedBtn) {
    const options = document.getElementById("quizOptions").children;
    const meterFill = document.getElementById("meterFill");
    const answerDisplay = document.getElementById("quizAnswer");

    const funnyCorrect = [
        "âœ¨ So smart â€” Iâ€™m proud of you ğŸ’•",
        "ğŸŒ¸ That was a beautiful answer, Mamta!",
        "ğŸ’ Perfect choice, just like you",
        "ğŸŒŸ Absolutely right â€” well done!",
        "ğŸ‘‘ Brilliant as always, Mamta",
        "ğŸ˜„ You nailed it!",
        "ğŸ”¥ Sharp move, Mamta!",
        "ğŸŠ That was impressive!",
        "ğŸ’« Right on point, Mamta",
        "ğŸ¥³ Great job â€” keep going!",
        "ğŸ’– Your mind shines bright, Mamta",
        "ğŸŒ¹ So thoughtful â€” I love this",
        "âœ¨ Smart and lovely combo!",
        "ğŸ‘‘ Queen-level answer, Mamta!",
        "ğŸ’• That was perfect, Mamta",
        "ğŸŒŸ Correct â€” nicely done",
        "ğŸŒ¸ Very well answered, Mamta",
        "ğŸ’ Excellent thinking",
        "âœ¨ Spot on!",
        "ğŸ’– You got it right, Mamta",
        "ğŸ€ Youâ€™re doing amazing, Mamta!",
        "ğŸ’« Such a smart answer!",
        "ğŸŒº Beautifully done, Mamta",
        "âœ¨ Your intelligence shows!",
        "ğŸ‰ Perfect answer â€” proud of you!",
        "ğŸ’ Mamta, that was lovely",
        "ğŸ‘‘ Always impressive, Mamta"
    ];

    const funnyIncorrect = [
        "ğŸ˜… Oops! Not this one, Mamta",
        "ğŸ¤­ Closeâ€¦ but the answer ran away",
        "ğŸ™ˆ Almost! Try again",
        "ğŸ˜„ Wrong turn, but nice confidence!",
        "ğŸŒ€ That answer is on vacation",
        "ğŸ¤” Hmmâ€¦ interesting choice, Mamta",
        "ğŸ˜† Creative answer â€” but nope!",
        "ğŸ§  Brain loadingâ€¦ please retry",
        "ğŸ¯ Missed it by a little",
        "ğŸ¤¹ Nice try, Mamta!",
        "ğŸ’« Not quite right, but keep going",
        "ğŸŒ¼ Good attempt â€” try once more",
        "ğŸ˜Š No worries, Mamta â€” next one!",
        "ğŸ”„ Letâ€™s give it another shot",
        "ğŸ€ Wrong answer, right effort",
        "ğŸ¤­ That answer needs a rethink",
        "ğŸ˜œ The question says â€œnopeâ€",
        "ğŸ§© Puzzle not solved this time",
        "ğŸ‚ Birthday magic says try again!",
        "ğŸ˜‚ Funny guess, Mamta!",
        "ğŸ£ Almost there â€” tiny mistake",
        "ğŸ‰ Oops moment! Next one will be right",
        "ğŸ’– Wrong answer, still adorable",
        "ğŸŒˆ Nice guess â€” but not today",
        "ğŸ˜„ Mamta, that one was sneaky wrong"
    ];


    for(let btn of options) { 
        btn.style.pointerEvents = "none"; 
    }

    if (isCorrect) {
        clickedBtn.classList.add('correct-btn'); // Turn Green
        correctCount++; 
        
        let progress = (correctCount / 10) * 100;
        meterFill.style.height = Math.min(progress, 100) + "%";
        
        const randomSuccess = funnyCorrect[Math.floor(Math.random() * funnyCorrect.length)];
        answerDisplay.innerText = randomSuccess;
        answerDisplay.style.color = "#43e97b";

        if (correctCount === 10) {
            setTimeout(triggerGrandFinale, 1000);
            return;
        }
    } else {
        clickedBtn.style.background = "#ff4f81"; // Turn Red
        
        const currentQ = quizData.find(item => item.q === document.getElementById("quizQuestion").innerText);
        const correctText = currentQ.o[currentQ.a];

        const randomFunny = funnyIncorrect[Math.floor(Math.random() * funnyIncorrect.length)];
        answerDisplay.innerText = `${randomFunny} (Correct: ${correctText})`;
        answerDisplay.style.color = "#ff4f81";
    }

    if (correctCount < 10) {
        setTimeout(nextQuestion, 2000);
    }
}


function nextQuestion() {
    quizIndex++;
    if (quizIndex < quizData.length && correctCount < 10) {
        loadQuiz(); 
    } else if (correctCount < quizData.length) {
        document.getElementById("quizQuestion").innerText = "Quiz Finished!";
        document.getElementById("quizOptions").innerHTML = 
            `<p style='text-align:center;'>You got ${correctCount}/${quizData.length} correct! <br> Restart to break the meter! ğŸ€</p>
             <button class='magic-btn' onclick='resetQuizGame()'>Try Again</button>`;
    }
}


function triggerGrandFinale() {
    // 1. Shake the screen
    document.body.classList.add('shake-screen');
    startFlowerShower(); 
    
    // 2. Transform the Quiz box into the Gift
    const quizContainer = document.getElementById("quizQuestion").parentElement;
    document.getElementById("quizOptions").innerHTML = "";
    document.getElementById("quizQuestion").innerHTML = `
        <div id="giftWrapper" style="text-align:center; width:100%;">
            <h2 style="color:#ff4f81;">100% CUTE DETECTED!</h2>
            <div id="theGift" class="box-shake" style="font-size:100px; cursor:pointer; margin:20px 0;" onclick="openGrandPrize()">
                ğŸ
            </div>
            <p style="font-weight:bold; color:#666;">Mamta, click the gift to unbox! âœ¨</p>
        </div>
    `;
    setTimeout(() => document.body.classList.remove('shake-screen'), 1000);
}

function openGrandPrize() {
    // 1. Trigger many hearts for the "Explosion"
    for(let i=0; i<100; i++){
        setTimeout(() => createParticle(window.innerWidth/2, window.innerHeight/2), i * 30);
    }

    // 2. Show the black screen and image after a tiny delay
    setTimeout(() => {
        const overlay = document.getElementById("fullScreenOverlay");
        overlay.style.display = "flex";
        document.body.style.overflow = "hidden"; // Stops page scrolling
    }, 3000);
}

function startFlowerShower() {
    for(let i=0; i<50; i++) {
        setTimeout(() => {
            let e = document.createElement('div');
            e.className = 'flower-shower';
            e.innerText = ['ğŸŒ¸','ğŸŒº','ğŸŒ¹','ğŸŒ·','ğŸŒ¼'][Math.floor(Math.random()*5)];
            e.style.left = Math.random() * 100 + 'vw';
            e.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(e);
            setTimeout(() => e.remove(), 5000);
        }, i * 100);
    }
}


function enterPage(){
    document.getElementById('page1').classList.add('hidden');
    document.getElementById('page2').classList.remove('hidden');
    
    music.play();
    startTime = Date.now();
    setInterval(() => {
        document.getElementById('timer').innerText = `Youâ€™ve been smiling here for ${Math.floor((Date.now() - startTime) / 1000)} seconds â³`;
    }, 1000);
    
    floatLoop(); 
    loadQuiz();
}


function startHeartGame(){
score=0;
document.getElementById('score').innerText='Score: 0';
for(let i=0;i<10;i++){
let heart=document.createElement('div');
heart.innerText='ğŸ’–';
heart.style.position='fixed';
heart.style.left=Math.random()*90+'vw';
heart.style.top=Math.random()*80+'vh';
heart.style.fontSize='40px';
heart.style.cursor='pointer';
document.body.appendChild(heart);
heart.onclick=()=>{
score++;
document.getElementById('score').innerText='Score: '+score;
heart.remove();
gamesPlayed++;
checkUnlock();
};
setTimeout(()=>heart.remove(),3000);
}
}

document.querySelectorAll('.game')[1].querySelector('button').innerText = 'Start';

function checkUnlock() {
    document.getElementById('secretScore').innerText = score;

    const revealBtn = document.getElementById('revealBtn');

    // Show button ONLY if not already opened
    if (score >= 10 && !secretOpened) {
        revealBtn.style.display = 'inline-block';
    }
}

function revealSecret() {
    const msgBox = document.getElementById('hiddenMsg');
    const revealBtn = document.getElementById('revealBtn');

    secretOpened = true;      // ğŸ”’ lock opened
    revealBtn.style.display = 'none';

    msgBox.style.display = 'block';
    msgBox.scrollTop = 0;

    msgBox.innerHTML = `
      <p style="color:#8B0000; margin-top:10px;">
        Happy Birthday ğŸŒ¹<br><br>
        On your special day, I want you to know how deeply grateful I am for everything you have done. The support and care you showed my family during difficult times came from a truly kind heart, and it will never be forgotten.
        Some people help without expecting anything in return, and you are one of those rare people. Your presence brought comfort and strength when we needed it the most. I sincerely pray that life gives you back all the happiness, love, and peace that you have given to others.
        Wishing you a beautiful year ahead and a life full of blessings.ğŸ’
      </p>

      <div style="text-align:center; margin-top:15px;">
        <button onclick="closeSecret()" 
          style="font-size:12px;padding:4px 14px;border:none;border-radius:14px;
          background:#ff4f81;color:white;cursor:pointer;">
          Close ğŸ”’
        </button>
      </div>
    `;
}

function closeSecret() {
    const msgBox = document.getElementById('hiddenMsg');

    msgBox.style.display = 'none';
    msgBox.scrollTop = 0;

    // Reset game requirement
    score = 0;
    document.getElementById('score').innerText = 'Score: 0';
    document.getElementById('secretScore').innerText = '0';

    secretOpened = false; // user must play again
}



function setMood(i){
    let m = [
        '#ffb6c1', '#a1c4fd', '#fbc2eb', '#fff1eb', '#ffecd2', 
        '#f9d29d', '#c1dfc4', '#ffdde1', '#e0c3fc', '#f093fb', 
        '#4facfe', '#43e97b', '#fa709a', '#ffefba', '#00c6ff', 
        '#fdfbfb', '#fbc2eb', '#f6d365', '#ff9a9e', '#a1c4fd',
        '#d4fc79', '#84fab0', '#cfd9df', '#e0eafc', '#f093fb', 
        '#43e97b', '#fa709a', '#ffefba', '#f6d365', '#ff9a9e', 
        '#c1dfc4', '#4facfe', '#8e2de2', '#0f2027', '#43cea2', '#1d2671'
    ];
    
    document.body.style.transition = "background-color 1s"; 
    document.body.style.background = m[i]; 
    document.body.style.backgroundColor = m[i]; 
}

function compliment(){
let c=[
'You are magical âœ¨','Your smile is everything ğŸ’–','You shine ğŸŒ¸','You are loved ğŸ’',
'You are amazing ğŸŒŸ','Keep glowing ğŸ’«','You are the best ğŸ’•','Your happiness matters ğŸ’',
'Your energy is infectious ğŸŒ¸','You are a superstar ğŸ’–','You make life brighter âœ¨',
'You are brilliant ğŸ’','Your kindness inspires ğŸ’•','You light up the room ğŸŒˆ',
'You are wonderful ğŸŒ¹','You are unique ğŸ’«','You spread joy ğŸ‰','Your laughter is precious ğŸ˜„',
'You are beautiful inside & out ğŸŒ¸','You are unstoppable ğŸ’ª'
];
comp.innerText=c[Math.floor(Math.random()*c.length)];
}


let isBlowing = false; 

function blowClick(el) {
    if (el.innerText !== 'ğŸ’') {
        const rect = el.getBoundingClientRect();
        for (let i = 0; i < 15; i++) {
            createParticle(rect.left + rect.width / 2, rect.top + rect.height / 2);
        }

        el.style.opacity = '0.3';
        el.style.transform = 'scale(0.5)';
        setTimeout(() => {
            el.innerText = 'ğŸ’';
            el.style.opacity = '1';
            el.style.transform = 'scale(1.1)';
        }, 600);
    }
}


function startMic() {
    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const analyser = audioContext.createAnalyser();
        const microphone = audioContext.createMediaStreamSource(stream);
        const scriptProcessor = audioContext.createScriptProcessor(2048, 1, 1);
        analyser.fftSize = 512;
        microphone.connect(analyser);
        scriptProcessor.connect(audioContext.destination);

        scriptProcessor.onaudioprocess = () => {
            const array = new Uint8Array(analyser.frequencyBinCount);
            analyser.getByteFrequencyData(array);
            let values = 0;
            for (let i = 0; i < array.length; i++) values += array[i];
            let average = values / array.length;

            if (average > 15 && !isBlowing) { 
                const cakes = Array.from(document.querySelectorAll('.cake')).filter(c => c.innerText !== 'ğŸ’');
                if (cakes.length > 0) {
                    isBlowing = true;
                    blowClick(cakes[0]);
                    setTimeout(() => isBlowing = false, 800);
                }
            }
        };
    }).catch(err => alert("Mic access required!"));
}

function resetBlowGame() {
    const original = ['ğŸ‚', 'ğŸ§', 'ğŸ°', 'ğŸ®'];
    document.querySelectorAll('.cake').forEach((el, i) => {
        el.innerText = original[i];
        el.style.opacity = '1';
        el.style.transform = 'scale(1)';
    });
    score = 0;
    gamesPlayed = 0;
}


function openGiftPage() {
    // SAVE the current position before leaving Page 2
    page2ScrollY = window.scrollY; 
    
    document.getElementById('page2').classList.add('hidden');
    document.getElementById('page3').classList.remove('hidden');
    document.getElementById('stopFlowBtn').style.display = 'block';
    
    // Start the NEW page from the top
    window.scrollTo(0, 0); 
}


function backToGames() {
    document.getElementById('page3').classList.add('hidden'); // Hide Gifts
    document.getElementById('page2').classList.remove('hidden'); // Show Main Page
    document.getElementById('stopFlowBtn').style.display = 'none';
    
    // Restore the scroll position
    window.scrollTo(0, page2ScrollY); 
}




function startFireworksWithText() {
    // Shooting point: Bottom Center of the phone
    const startX = window.innerWidth / 2;
    const startY = window.innerHeight;

    let count = 0;
    const interval = setInterval(() => {
        // Target points: Anywhere across the screen
        const targetX = Math.random() * window.innerWidth;
        const targetY = Math.random() * (window.innerHeight * 0.6); 
        
        createFirework(startX, startY, targetX, targetY);
        count++;
        if (count > 20) clearInterval(interval);
    }, 300);
    startCanvasFireworks();

}

function createFirework(sx, sy, tx, ty) {
    const rocket = document.createElement('div');
    rocket.style.cssText = `position:fixed; left:${sx}px; top:${sy}px; width:4px; height:4px; background:#fff; border-radius:50%; z-index:10000; transition: all 0.8s ease-out;`;
    document.body.appendChild(rocket);

    setTimeout(() => {
        rocket.style.left = tx + 'px';
        rocket.style.top = ty + 'px';
        setTimeout(() => {
            for(let i=0; i<30; i++) createParticle(tx, ty);
            rocket.remove();
        }, 800);
    }, 10);
}


function openMemoriesPage() {
    // SAVE the current position before leaving Page 2
    page2ScrollY = window.scrollY; 
    
    document.getElementById('page2').classList.add('hidden');
    document.getElementById('page4').classList.remove('hidden');
    document.getElementById('stopFlowBtn').style.display = 'block';
    
    // Start the NEW page from the top
    window.scrollTo(0, 0); 
}


function backToGamesFromMemories() {
    document.getElementById('page4').classList.add('hidden'); // Hide Memories
    document.getElementById('page2').classList.remove('hidden'); // Show Main Page
    document.getElementById('stopFlowBtn').style.display = 'none';
    
    // Restore the scroll position
    window.scrollTo(0, page2ScrollY);
}

function openPopup(img){
  document.getElementById("popupImg").src = img.src;
  document.getElementById("imgPopup").style.display = "flex";
}

function closePopup(){
  document.getElementById("imgPopup").style.display = "none";
}

function initScratch() {
    const canvas = document.getElementById('scratchCanvas');
    const ctx = canvas.getContext('2d');
    
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = '#C0C0C0'; 
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = '#888';
    ctx.font = 'bold 14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('SCRATCH HERE ğŸ€', 100, 105);

    let isDrawing = false;

    function scratch(e) {
        if (!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        const x = clientX - rect.left;
        const y = clientY - rect.top;

        ctx.globalCompositeOperation = 'destination-out';
        ctx.beginPath();
        ctx.arc(x, y, 20, 0, Math.PI * 2);
        ctx.fill();
    
    }

    // Mouse Events
    canvas.addEventListener('mousedown', () => isDrawing = true);
    window.addEventListener('mouseup', () => isDrawing = false);
    canvas.addEventListener('mousemove', scratch);
    
    // Touch Events (for Mobile)
    canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); });
    canvas.addEventListener('touchend', () => isDrawing = false);
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); scratch(e); });
}

// Start the scratch card automatically when the page loads
setTimeout(initScratch, 500);


// 1. List your images here
const scratchPhotos = [
    "SCRATCH/scratch1.jpg", 
    "SCRATCH/scratch2.jpg", 
    "SCRATCH/scratch3.jpg", 
    "SCRATCH/scratch4.jpg",
    "SCRATCH/scratch5.jpg", 
    "SCRATCH/scratch6.jpg", 
    "SCRATCH/scratch7.jpg", 
    "SCRATCH/scratch8.jpg",
    "SCRATCH/scratch9.jpg", 
    "SCRATCH/scratch10.jpg", 
    "SCRATCH/scratch11.jpg", 
    "SCRATCH/scratch12.jpg",
    "SCRATCH/scratch13.jpg", 
    "SCRATCH/scratch14.jpg", 
    "SCRATCH/scratch15.jpg", 
    "SCRATCH/scratch16.jpg",
    "SCRATCH/scratch17.jpg", 
    "SCRATCH/scratch18.jpg", 
    "SCRATCH/scratch19.jpg", 
    "SCRATCH/scratch20.jpg"
];

function initScratch() {
    // 2. Pick a random photo from the list
    const randomPic = scratchPhotos[Math.floor(Math.random() * scratchPhotos.length)];
    
    // 3. Update the image shown under the scratch layer
    const imgElement = document.getElementById('scratchImage');
    if(imgElement) imgElement.src = randomPic;

    // --- Standard Scratch Logic Below ---
    const canvas = document.getElementById('scratchCanvas');
    const ctx = canvas.getContext('2d');
    
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = '#C0C0C0'; 
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = '#888';
    ctx.font = 'bold 14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('SCRATCH HERE ğŸ€', 90, 95);

    let isDrawing = false;

    function scratch(e) {
        if (!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        const x = clientX - rect.left;
        const y = clientY - rect.top;

        ctx.globalCompositeOperation = 'destination-out';
        ctx.beginPath();
        ctx.arc(x, y, 20, 0, Math.PI * 2);
        ctx.fill();    
    }

    canvas.addEventListener('mousedown', () => isDrawing = true);
    window.addEventListener('mouseup', () => isDrawing = false);
    canvas.addEventListener('mousemove', scratch);
    canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); });
    canvas.addEventListener('touchend', () => isDrawing = false);
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); scratch(e); });
}


function resetQuizGame() {
    quizIndex = 0;
    correctCount = 0;
    document.getElementById("meterFill").style.height = "0%";
    document.getElementById("quizAnswer").innerText = "";
    loadQuiz();
}


// --- 1. TIME TRAVEL LOGIC ---
const memories = [
    {img: "MEMORY/memory1.jpg", text: "The day we first met... ğŸŒ¸"},
    {img: "MEMORY/memory2.jpg", text: "Remember this smile? It's my favorite! ğŸ˜"},
    {img: "MEMORY/memory3.jpg", text: "You looked like an angel here. âœ¨"},
    {img: "MEMORY/memory4.jpg", text: "Every day with you is a new adventure. ğŸ’–"},
    {img: "MEMORY/memory5.jpg", text: "The day we first met... ğŸŒ¸"},
    {img: "MEMORY/memory6.jpg", text: "Remember this smile? It's my favorite! ğŸ˜"},
    {img: "MEMORY/memory7.jpg", text: "You looked like an angel here. âœ¨"},
    {img: "MEMORY/memory8.jpg", text: "Every day with you is a new adventure. ğŸ’–"},
    {img: "MEMORY/memory9.jpg", text: "The day we first met... ğŸŒ¸"},
    {img: "MEMORY/memory10.jpg", text: "Remember this smile? It's my favorite! ğŸ˜"},
    
];
let memIdx = 0;

function nextMemory() {
    memIdx = (memIdx + 1) % memories.length;
    const img = document.getElementById("travelImg");
    const cap = document.getElementById("travelCaption");
    
    // Add a quick fade effect
    img.style.opacity = 0;
    setTimeout(() => {
        img.src = memories[memIdx].img;
        cap.innerText = memories[memIdx].text;
        img.style.opacity = 1;
    }, 200);
}

// --- 2. BOUQUET BUILDER LOGIC ---
function addFlower(emoji) {
    const area = document.getElementById("bouquetArea");
    // If it gets too long, clear it to start over
    if (area.innerText.length > 24) {
        area.innerText = "";
    }
    area.innerText += emoji;
    
    // Playful bounce animation
    area.style.transform = "scale(1.2)";
    setTimeout(() => area.style.transform = "scale(1)", 150);
}

// --- 3. HEART EXPLOSION LOGIC ---
let loveScore = 0;
function countLove() {
    loveScore++;
    document.getElementById("loveCount").innerText =
        "Love Level: " + loveScore;

    const mainHeart = document.getElementById("mainHeart");
    mainHeart.style.transform = "scale(0.7)";
    setTimeout(() => mainHeart.style.transform = "scale(1)", 150);
}

function explodeNow() {
    const mainHeart = document.getElementById("mainHeart");
    const rect = mainHeart.getBoundingClientRect();

    // 1. Get position of the heart
    const x = rect.left + rect.width / 2;
    const y = rect.top + rect.height / 2;

    // 2. Explode hearts based on the CURRENT level
    for (let i = 0; i < loveScore; i++) {
        createParticle(x, y);
    }

    // 3. THE RESET (Add these two lines here)
    loveScore = 0; 
    document.getElementById("loveCount").innerText = "Love Level: 0";

    // 4. Temporary hide/bounce effect
    mainHeart.style.visibility = "hidden";
    setTimeout(() => { mainHeart.style.visibility = "visible"; }, 1000);
}



function createParticle(x, y) {
    const particle = document.createElement('div');
    particle.className = 'burst-heart';
    particle.innerText = Math.random() > 0.5 ? 'ğŸ’–' : 'â¤ï¸';
    
    // Starting position (center)
    particle.style.left = x + 'px';
    particle.style.top = y + 'px';

    // Calculate random direction and distance to cover the WHOLE screen
    const angle = Math.random() * Math.PI * 2; 
    const distance = Math.max(window.innerWidth, window.innerHeight); // Travels to edges

    const tx = Math.cos(angle) * distance + 'px';
    const ty = Math.sin(angle) * distance + 'px';
    
    particle.style.setProperty('--tx', tx);
    particle.style.setProperty('--ty', ty);

    document.body.appendChild(particle);

    const delay = Math.random() * 800;
    particle.style.animationDelay = delay + "ms";
    // Remove heart after it leaves the screen
    setTimeout(() => {
        particle.remove();
    }, 5000); 
}



function incrementLove(event) {
    loveScore++; // This adds 1 to the current score
    document.getElementById("loveCount").innerText = "Love Level: " + loveScore;
    
    // Pulse effect for the heart
    const mainHeart = document.getElementById("mainHeart");
    mainHeart.style.transform = "scale(1.2)";
    setTimeout(() => { mainHeart.style.transform = "scale(1)"; }, 100);
}

function bigExplosion(event) {
    // 1. Check if there is love to explode
    if (loveScore === 0) {
        alert("Tap the heart to increase the Love Level first! â¤ï¸");
        return;
    }

    // 2. Start explosion from the center of the screen
    const x = window.innerWidth / 2;
    const y = window.innerHeight / 2;

    // 3. Create pieces equal to the loveScore
    for (let i = 0; i < loveScore; i++) {
        createParticle(x, y);
    }
    
    loveScore = 0; // Resets the internal math counter
    document.getElementById("loveCount").innerText = "Love Level: 0"; // Resets the screen text
}

let flowersPlanted = 0;
let butterflyCreated = false;

function plantFlower(e) {
    flowersPlanted++;
    const canvas = document.getElementById("gardenCanvas");
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // Create a flower
    const flower = document.createElement("div");
    const types = ['ğŸŒ»', 'ğŸŒ·', 'ğŸŒ¹', 'ğŸŒ¼', 'ğŸŒ¸'];
    flower.innerText = types[Math.floor(Math.random() * types.length)];
    flower.style.position = "absolute";
    flower.style.left = (x - 10) + "px";
    flower.style.top = (y - 10) + "px";
    flower.style.fontSize = "20px";
    flower.style.transition = "transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
    flower.style.transform = "scale(0)";
    
    canvas.appendChild(flower);
    setTimeout(() => flower.style.transform = "scale(1)", 10);
    
    document.getElementById("flowerCount").innerText = flowersPlanted;
    document.getElementById("gardenHint").style.display = "none";

    // Summon Butterfly at 10 flowers
    if (flowersPlanted >= 10 && !butterflyCreated) {
        summonButterfly();
    }
}

function summonButterfly() {
    butterflyCreated = true;
    const bf = document.createElement("div");
    bf.id = "magicButterfly";
    bf.innerText = "ğŸ¦‹";
    bf.style.position = "fixed"; 
    bf.style.fontSize = "40px";
    bf.style.transition = "all 0.6s ease-out"; 
    bf.style.zIndex = "10000"; 
    bf.style.pointerEvents = "none"; 
    document.body.appendChild(bf);

    document.getElementById("gardenStatus").innerHTML = "<b>The Golden Butterfly is now following you! âœ¨</b>";

    // Global listener: Butterfly now follows the touch/mouse on the ENTIRE screen
    window.onmousemove = (e) => {
        bf.style.left = (e.clientX - 20) + "px";
        bf.style.top = (e.clientY - 20) + "px";
    };
    
    // Support for Mobile Touch
    window.ontouchmove = (e) => {
        bf.style.left = (e.touches[0].clientX - 20) + "px";
        bf.style.top = (e.touches[0].clientY - 20) + "px";
    };
}

function resetGarden() {
    flowersPlanted = 0;
    butterflyCreated = false;
    
    // Clear the flowers in the box
    const canvas = document.getElementById("gardenCanvas");
    canvas.innerHTML = '<p id="gardenHint" style="margin-top: 60px; font-size: 13px; color: #2e8b57;">Tap inside to plant flowers! ğŸŒ·</p>';
    
    // Remove the global butterfly if it exists
    const oldBf = document.getElementById("magicButterfly");
    if(oldBf) oldBf.remove();
    
    // Stop the following logic
    window.onmousemove = null;
    window.ontouchmove = null;
    
    document.getElementById("gardenStatus").innerHTML = 'Flowers planted: <span id="flowerCount">0</span>/10 to summon the Butterfly';
}

let shakeAmount = 0;
let lastX, lastY;

function updateBottle() {
    let bottle = document.getElementById('magicBottle');
    let bar = document.getElementById('shakeBar');
    
    // Make bottle vibrate
    let tilt = (Math.random() - 0.5) * 20;
    bottle.style.transform = `rotate(${tilt}deg)`;
    
    // Update progress bar
    bar.style.width = shakeAmount + "%";

    if (shakeAmount >= 100) {
        openBottle();
    }
}

function openBottle() {
    document.getElementById('magicBottle').style.display = 'none';
    document.getElementById('hiddenMessage').style.display = 'block';
    document.getElementById('shakeStatus').innerText = "Message Received! â¤ï¸";
    document.getElementById('shakeStatus').style.color = "#ffeb3b";
}


// --- BOTTLE TREASURE LOGIC ---
const birthdayMessages = [
    "Mamta, you are the most precious treasure I've ever found! ğŸ’",
    "Wishing you a day as bright as your beautiful smile! âœ¨",
    "May all your dreams come true this year, Mamta! ğŸŒ™",
    "You make every day feel like a celebration! ğŸŠ",
    "To the girl with a heart of gold... Happy Birthday! ğŸ’›",
    "Every year with you is a new adventure! ğŸ—ºï¸",
    "You are my favorite reason to smile. ğŸ˜Š",
    "Sending you a bottle full of love and warm hugs! ğŸ«‚",
    "May your birthday be filled with infinite happiness! â™¾ï¸",
    "You deserve all the cake and love in the world today! ğŸ‚",
    "Like a message in a bottle, you are rare and special. ğŸ“œ",
    "Keep shining like the star you are, Mamta! â­",
    "I'm so lucky to have you in my life! ğŸ€",
    "To many more years of laughter and joy together! ğŸ¥‚",
    "You look more beautiful with every passing year! ğŸŒ¹",
    "Wishing you health, wealth, and endless love! ğŸ’–",
    "May this year be your best one yet! ğŸš€",
    "You are my sunshine on a rainy day! â˜€ï¸",
    "Happy Birthday to my one and only treasure! ğŸ’",
    "Let's make today unforgettable together! ğŸ†"
];


// Shake by Clicking
document.getElementById('magicBottle').onclick = function() {
    if (shakeAmount >= 100) return;
    shakeAmount += 10;
    updateBottleDisplay();
};

function updateBottleDisplay() {
    let bottle = document.getElementById('magicBottle');
    let bar = document.getElementById('shakeBar');
    let tilt = (Math.random() - 0.5) * 40;
    bottle.style.transform = `rotate(${tilt}deg) scale(1.1)`;
    bar.style.width = Math.min(shakeAmount, 100) + "%";

    if (shakeAmount >= 100) {
        openBottle();
    }
}


let shuffledMessages = [...birthdayMessages].sort(() => Math.random() - 0.5);
let msgIndex = 0;

function openBottle() {
    document.getElementById('randomScrollText').innerText =
        shuffledMessages[msgIndex];

    msgIndex = (msgIndex + 1) % shuffledMessages.length;

    document.getElementById('magicBottle').style.display = 'none';
    document.getElementById('hiddenMessage').style.display = 'block';
}


function resetBottle() {
    shakeAmount = 0;
    document.getElementById('shakeBar').style.width = "0%";
    document.getElementById('magicBottle').style.display = 'block';
    document.getElementById('magicBottle').style.transform = 'rotate(0deg)';
    document.getElementById('hiddenMessage').style.display = 'none';
}

function resetFromImage() {
    // 1. Hide the full screen image
    const overlay = document.getElementById("fullScreenOverlay");
    overlay.style.display = "none";
    document.body.style.overflow = "auto";

    // 2. Reset the quiz and meter (Calling your existing reset function)
    resetQuizGame();
}

function resetFromImage() {
    // 1. Hide the black overlay
    const overlay = document.getElementById("fullScreenOverlay");
    overlay.style.display = "none";
    document.body.style.overflow = "auto";

    // 2. Reset the Quiz and the Meter
    resetQuizGame(); 
}

// Standard Fisher-Yates Shuffle Algorithm
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}


let bgPartyInterval = null;

function toggleBgParty(start) {
    const startBtn = document.getElementById('startColorBtn');
    const stopBtn = document.getElementById('stopColorBtn');

    if (start) {
        startBtn.style.display = 'none';
        stopBtn.style.display = 'inline-block';

        bgPartyInterval = setInterval(() => {
            const hue = Math.floor(Math.random() * 360);
            const pastelColor = `hsl(${hue}, 70%, 85%)`; 
            document.body.style.setProperty('background', pastelColor, 'important');
            document.body.style.setProperty('background-color', pastelColor, 'important');
        }, 800); 
    } else {
        if(bgPartyInterval) clearInterval(bgPartyInterval);
        startBtn.style.display = 'inline-block';
        stopBtn.style.display = 'none';
        document.body.style.background = "#ffb6c1";
        document.body.style.backgroundColor = "#ffb6c1";
    }
}


let bottleProgress = 0;
let bottleBroken = false;

function handleBottleAction() {
    if (bottleBroken) return;

    const bar = document.getElementById('shakeBar');
    const bottle = document.getElementById('magicBottle');
    
    // SLOWER PROGRESS: increase by only 1.5 per rub/tap
    bottleProgress += 0.7; 
    bar.style.width = Math.min(bottleProgress, 100) + '%';
    
    // Shake effect
    bottle.style.transform = `rotate(${Math.random() * 20 - 10}deg) scale(1.1)`;

    if (bottleProgress >= 100) {
        bottleBroken = true;
        bottle.innerText = 'ğŸ’¥'; // Breaks first
        bottle.style.animation = 'prize-grow 0.5s forwards';
        
        setTimeout(() => {
            bottle.style.display = 'none';
            document.getElementById('hiddenMessage').style.display = 'block';
            document.getElementById('randomScrollText').innerText = birthdayMessages[Math.floor(Math.random() * birthdayMessages.length)];
        }, 800);
    }
}
const bottle = document.getElementById('magicBottle');

/* ğŸ’» Laptop: tap + rub */
bottle.addEventListener('click', handleBottleAction);
bottle.addEventListener('mousemove', handleBottleAction);

/* ğŸ“± Mobile: tap + rub */
bottle.addEventListener('touchstart', handleBottleAction);
bottle.addEventListener('touchmove', (e) => {
    e.preventDefault();
    handleBottleAction();
});


function resetBottle() {
    bottleProgress = 0;
    bottleBroken = false;
    document.getElementById('shakeBar').style.width = '0%';
    document.getElementById('magicBottle').innerText = 'ğŸ¾';
    document.getElementById('magicBottle').style.display = 'block';
    document.getElementById('hiddenMessage').style.display = 'none';
}

function showStep(step) {
    // 1. Hide all sections
    document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
    
    // 2. Show the target section
    const target = document.getElementById('step' + step);
    if (target) {
        target.classList.add('active');
        
        // --- ADD THIS LINE HERE ---
        window.scrollTo({ top: 0, behavior: 'smooth' }); 
        // --------------------------
    }

    // (Optional logic for specific steps)
    if (step === 2) startMic();
    if (step === 3) { score = 0; updateScore(); gameActive = true; spawnHeart(); }
    if (step === 4) startFireworksWithText();
}


let isFallingEnabled = true;
let flowerInterval = 900; 
let flowerTimer;

// Modified Enter Function
function enterPage(){
    document.getElementById('page1').classList.add('hidden');
    document.getElementById('page2').classList.remove('hidden');
    
    // Show the stop button only on Page 2
    document.getElementById('stopFlowBtn').style.display = 'block';
    
    music.play();
    startTime = Date.now();
    setInterval(() => {
        document.getElementById('timer').innerText = `Youâ€™ve been smiling here for ${Math.floor((Date.now() - startTime) / 1000)} seconds â³`;
    }, 1000);
    
    floatLoop(); 
    loadQuiz();
}

// Updated Animation Loop
function floatLoop() {
    if (!isFallingEnabled) return; // Don't start if disabled

    if (flowerTimer) clearInterval(flowerTimer);

    flowerTimer = setInterval(() => {
        if (!isFallingEnabled) {
            clearInterval(flowerTimer);
            return;
        }
        
        let e = document.createElement('div');
        e.className = 'float';
        const icons = ['ğŸ’–', 'ğŸŒ¸', 'âœ¨', 'ğŸ€', 'ğŸŒ·', 'ğŸŒ¹'];
        e.innerText = icons[Math.floor(Math.random() * icons.length)];
        e.style.left = Math.random() * 100 + 'vw';
        e.style.animationDuration = (4 + Math.random() * 4) + 's';
        document.body.appendChild(e);
        
        setTimeout(() => e.remove(), 8000);

        if (flowerInterval > 120) { 
            flowerInterval -= 5; 
            floatLoop(); 
        }
    }, flowerInterval);
}

// Toggle Function
function toggleFalling() {
    const btn = document.getElementById('stopFlowBtn');
    if (isFallingEnabled) {
        isFallingEnabled = false;
        clearInterval(flowerTimer);
        // Remove any flowers currently on screen
        document.querySelectorAll('.float, .flower-shower').forEach(el => el.remove());
        btn.innerText = "StartğŸŒ¹";
    } else {
        isFallingEnabled = true;
        flowerInterval = 900; // Reset speed
        floatLoop();
        btn.innerText = "StopğŸ¥€";
    }
}

function startCanvasFireworks() {
    // --- SHOW TEXT ---
const oldText = document.getElementById('fireworkText');
if (oldText) oldText.remove();

const textDiv = document.createElement('div');
textDiv.id = 'fireworkText';
textDiv.innerText = 'HAPPY BIRTHDAY MAMTA';
textDiv.style.top = '38%';
textDiv.style.left = '50%';
textDiv.style.transform = 'translate(-50%, -50%)';
document.body.appendChild(textDiv);

// auto remove text
setTimeout(() => textDiv.remove(), 6000);


    const old = document.getElementById('fireworkCanvas');
    if (old) old.remove();

    const canvas = document.createElement('canvas');
    canvas.id = 'fireworkCanvas';
    document.body.appendChild(canvas);

    const ctx = canvas.getContext('2d');

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    let fireworks = [];
    let particles = [];

    class Firework {
        constructor(x, y, tx, ty) {
            this.x = x;
            this.y = y;
            this.tx = tx;
            this.ty = ty;
            this.speed = 4;
            this.acc = 1.05;
            this.angle = Math.atan2(ty - y, tx - x);
        }
        update(i) {
            this.speed *= this.acc;
            this.x += Math.cos(this.angle) * this.speed;
            this.y += Math.sin(this.angle) * this.speed;
            if (Math.hypot(this.tx - this.x, this.ty - this.y) < 10) {
                explode(this.tx, this.ty);
                fireworks.splice(i, 1);
            }
        }
        draw() {
            ctx.fillStyle = "white";
            ctx.fillRect(this.x, this.y, 2, 2);
        }
    }

    class Particle {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.angle = Math.random() * Math.PI * 2;
            this.speed = Math.random() * 5 + 2;
            this.alpha = 1;
            this.decay = Math.random() * 0.01 + 0.004;
            this.color = `hsl(${Math.random() * 360},100%,60%)`;
        }
        update(i) {
            this.x += Math.cos(this.angle) * this.speed;
            this.y += Math.sin(this.angle) * this.speed + 0.6;
            this.alpha -= this.decay;
            if (this.alpha <= 0) particles.splice(i, 1);
        }
        draw() {
            ctx.fillStyle = this.color.replace(')', `,${this.alpha})`).replace('hsl','hsla');
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    
    function explode(x, y) {
    for (let i = 0; i < 60; i++) {
        const spreadX = x + (Math.random() - 0.5) * 120;
        const spreadY = y + (Math.random() - 0.5) * 120;
        particles.push(new Particle(spreadX, spreadY));
    }
}


    function animate() {
        ctx.globalCompositeOperation = 'destination-out';
        ctx.fillStyle = 'rgba(0,0,0,0.2)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.globalCompositeOperation = 'lighter';

        fireworks.forEach((f, i) => { f.update(i); f.draw(); });
        particles.forEach((p, i) => { p.update(i); p.draw(); });

        requestAnimationFrame(animate);
    }

    // text fireworks
    const text = "HAPPY BIRTHDAY MAMTA";
    ctx.font = "bold 80px Arial";
    ctx.textAlign = "center";
    ctx.fillText(text, canvas.width / 2, canvas.height / 2);

    const data = ctx.getImageData(0, 0, canvas.width, canvas.height);
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    let points = [];
    for (let y = 0; y < canvas.height; y += 8) {
        for (let x = 0; x < canvas.width; x += 8) {
            if (data.data[(y * canvas.width + x) * 4 + 3] > 150) {
                points.push({ x, y });
            }
        }
    }

    // FULL SCREEN RANDOM PARTICLE BLASTS
    const screenBlasts = setInterval(() => {
        explode(
        Math.random() * canvas.width,
        Math.random() * canvas.height
        );
    }, 200);

// stop safely (mobile-friendly)
setTimeout(() => clearInterval(screenBlasts), 20000);


    let i = 0;
    const launch = setInterval(() => {
        for (let j = 0; j < 6 && i < points.length; j++, i++) {
            fireworks.push(
                new Firework(canvas.width / 2, canvas.height, points[i].x, points[i].y)
            );
        }
        if (i >= points.length) clearInterval(launch);
    }, 40);

    animate();

    // auto cleanup (important for phone)
    setTimeout(() => {
    canvas.style.transition = 'opacity 2.5s ease';
    canvas.style.opacity = '0';

    setTimeout(() => canvas.remove(), 2500);
}, 12000);


}

</script>

<!-- IMAGE POPUP -->
<div id="imgPopup" onclick="closePopup()">
  <span class="close">&times;</span>
  <img id="popupImg">
</div>

</body>
</html>

